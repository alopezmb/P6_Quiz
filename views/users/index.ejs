
<h1>
    Users
</h1>

<table>
    <thead>
    <th scope="col">Status</th>
    <th scope="col" colspan="3">Username</th>

    </thead>
    <tbody>
    <% for (var i in users) { %>
    <tr>
        <% include ../users/datechecker %>

        <td>
            <a href="/users/<%= users[i].id %>" ><%= users[i].username %></a>
            <%= users[i].isAdmin ? "(admin)" : "" %>
        </td>
        <% if (session.user) { %>

        <% if (session.user.isAdmin || session.user.id === users[i].id){%>
        <td>
            <a href="/users/<%= users[i].id %>/edit"><button>edit</button></a>
        </td>
        <%  } %>


            <% if (session.user.isAdmin && session.user.id !== users[i].id) { %>
                <td>
                    <a href="/users/<%= users[i].id %>?_method=DELETE"
                       onClick="return confirm('Delete user: <%= users[i].username %>');">
                        <button>delete</button>
                    </a>
                </td>
            <%  } %>



        <%}%>

    </tr>

    <%  } %>
    </tbody>

</table>

    <% if (session.user) { %>
    <a href="/users/new"><button type="button">Create new user</button></a>
    <%  } %>


